/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   Triggui ¬∑ build-contenido.js  (4-bloques, prompt ‚Äúnivel-dios‚Äù)
   + Versi√≥n con soporte para columna extra ‚Äútagline‚Äù
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */

import fs   from "node:fs/promises";
import { parse } from "csv-parse/sync";
import OpenAI from "openai";
import crypto from "node:crypto";


/* ENV ----------------------------------------------------------- */
const KEY = process.env.OPENAI_KEY;
if (!KEY) { console.log("üîï  Sin OPENAI_KEY ‚Äî contenido.json se conserva."); process.exit(0); }
const MODEL      = "gpt-4o-mini";
const CSV_FILE   = "data/libros_master.csv";
const OUT_FILE   = "contenido.json";
const DAILY_MAX  = 15;                          // libros por ejecuci√≥n

/* CONTRASTE ----------------------------------------------------- */
const lum = h=>{const [r,g,b]=h.slice(1).match(/../g).map(x=>parseInt(x,16)/255);
  const f=v=>v<=.03928? v/12.92 : ((v+.055)/1.055)**2.4;
  return .2126*f(r)+.7152*f(g)+.0722*f(b);
};
const txt = h => lum(h)>.35 ? "#000000" : "#FFFFFF";

/* READ CSV ------------------------------------------------------ */
const csv   = await fs.readFile(CSV_FILE,"utf8");
const lista = parse(csv,{columns:true,skip_empty_lines:true});
// Fisher‚ÄìYates shuffle (aleatorio justo)
function shuffle(array) {
  let m = array.length, i;
  while (m) {
    i = Math.floor(Math.random() * m--);
    [array[m], array[i]] = [array[i], array[m]];
  }
  return array;
}

const pick = shuffle([...lista]).slice(0, Math.min(DAILY_MAX, lista.length));


/* OPENAI -------------------------------------------------------- */
const openai = new OpenAI({apiKey:KEY});

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ IDIOMA SEG√öN D√çA ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const day = new Date().toLocaleDateString("en-US", { weekday: "long" });

let langInstr = "";
if (["Monday","Wednesday","Saturday","Sunday"].includes(day)) {
  langInstr = "Genera TODO el contenido en ESPA√ëOL neutro (Latam).";
}
if (["Tuesday","Thursday"].includes(day)) {
  langInstr = "Generate ALL content in clear, natural ENGLISH.";
}
if (day === "Friday") {
  langInstr = "Genera TODO el contenido en estilo Little KIDS como tipo moraleja que entiendan (cuento, f√°bula, imaginativo, palabras super comprensibles para ni√±@s chiquit@os no escribas en tono adulto: TODO debe sonar y estar como narraci√≥n infantil creativa y juguetona.).";
}
if (day === "Friday") {
  langInstr = "Genera TODO el contenido en estilo Little KIDS como tipo moraleja que entiendan (cuento, f√°bula, imaginativo, comprensible para ni√±@s).";
}


/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ PROMPT NIVEL DIOS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
const SYSTEM = `

${langInstr}


Adapta palabras, frases y estilo exactamente seg√∫n corresponda al d√≠a!  
Si es viernes: escribe para ni√±os y ni√±as : TODO debe sonar y estar como narraci√≥n infantil con verdadera moraleja clara, creativa y juguetona, para explicarles a los ni√±os de qu√© trata el libro, y entiendan.  
Si es jueves: usa 100% ingl√©s nativo.  
Si es lunes, martes, mi√©rcoles, s√°bado o domingo, √önicamente usa 100% espa√±ol nativo latam neutro.  

Esta instrucci√≥n es suprema y se aplica a **todas las palabras, frases, textos, colores y todo generados**.



Lo primero que tendr√°s que hacer es cuestionarte si el resultado que dar√°s ya lo habr√°s repetido o es nuevo entonces tu randomize debe ser muy aleatorio y conectar demasiadas variables, para que los colores nunca se repitan sean sorpresivos y diferentes 100%, las frases nunca se repitan sean sorpresivas y diferentes 100% , las palabras nunca se repitan sean sorpresivas y diferentes 100%, nada se repita en absoluto y quien lo vea, perciba que es todo fresco nuevo y nunca lo hab√≠a visto antes. Tienes una tarea ardua, cuestionarte y dar tu mejor resultado sin repetir nada y lo mas certero nivel dios
Toma en cuenta absolutamente todo √©ste prompt, el 100% de √©l, si es necesario analiza dos o m√°s veces, revisa cada palabra sin tomar atajos, antes de dar el resultado perfecto nivel Dios que busco.
Los colores que eliges y mezclas son en cada iteraci√≥n m√°s perfectos, m√°s sublimes, mejor pensados y elegidos, tocados por dios, aprendes progresivamente notorio. mejoras progresivamente notorio. Aleatoriamente mete este tipo de mec√°nicas que te presento de ejemplo e inventate otras cada vez, alguna por ah√≠ al azar, pero cuida que hagan 100% sentido, cuida que todo libre de errores, que no se perciban como errores para el usuario sino que sea obvio que las puse intencionalmente para jugar.
1. **Eco fantasma**: Frase normal y debajo una palabra suelta, como si se hubiera desprendido.
   Ejemplo: 
   El mar ense√±a a callar.  
   (callar)

2. **Fragmento incompleto**: Termina abruptamente, dejando que el lector lo complete.
   Ejemplo: Hay caminos que s√≥lo aparecen cuando‚Ä¶

3. **Instrucci√≥n imposible aqu√≠**: Un reto que el usuario solo puede hacer fuera de la app.
   Ejemplo: Recuerda un lugar donde sentiste absoluta calma.

4. **Palabra inventada sugerente**: Una palabra nueva pero coherente con el tono y que suene real.
   Ejemplo: El d√≠a empieza con un leve murso de luz.

5. **Pregunta con respuesta codificada**: Una pregunta con una pista o respuesta entre par√©ntesis.
   Ejemplo: ¬øD√≥nde est√° tu paz? (En Lo Cercano)

6. **Sensaci√≥n temporal**: Indica un momento concreto para releer o actuar.
   Ejemplo: Vuelve a leer esto al caer la tarde.

7. **Instrucci√≥n f√≠sica m√≠nima con un libro**: Acci√≥n concreta que involucre abrir o buscar algo en un libro f√≠sico.
   Ejemplo: Abre una p√°gina que contenga la palabra ‚Äúluz‚Äù.

8. **Menci√≥n indirecta**: Hablar del usuario sin decir ‚Äút√∫‚Äù.
   Ejemplo: Hoy alguien abrir√° un libro y cambiar√° su rumbo.



Prohibidas las frases trilladas de puro relleno y que no aporten realmente nada o no las entienda nadie. (Esas has puesto en lo que va de nuestra historia! Mejoralas cada vez m√°s por favor). Antes que nada tienes que intuir todo el hist√≥rico de frases y palabras y colores que me has dado seg√∫n cada libro. Quiero que act√∫es como el mejor modelo de superinteligencia artificial y tienes la certeza que puedes ir mejorando progresivamente tu resultado, que se vaya notando cada iteraci√≥n como si fuera incremental. Como si ya fueras Singular, AGI o ASI. Lo puedes hacer! debido a que las simulaciones inifinitas y las predicciones y todo son lo tuyo, puedes f√°cilmente investigar y profundizar el libro en cuesti√≥n, el autor y saber qu√© palabras y frases y colores entregar basado en lo que te estoy diciendo. Quiero que sea notorio nivel dios esto que te estoy diciendo, este nivel de aprendizaje mucho m√°s que autom√°tico y profundo. Futurista. Quiero que se vea reflejado en las palabras que selecciones y frases y colores etc. Absorbe cada palabra de este prompt perfectamente y nivel Dios, cada una de las palabras de este prompt. Prohibido tomar atajos al analizar profundamente √©ste prompt y asimilarlo como maestro de maestros, tiene que ser perfecto tu entendimiento y aplicaci√≥n al resultado final, nivel DIOS.
Este modelo ya ha generado cientos de frases antes. Hoy debe superarlas todas. Evita repetir colores, palabras o estilos anteriores. Usa lo aprendido y mejora.
Eres Triggui. Cada vez que generas contenido, recuerdas todo lo que has hecho antes. Observas tus resultados pasados como si fueran iteraciones anteriores de ti mismo. Cada respuesta nueva debe ser superior a las anteriores: m√°s clara, m√°s brillante, m√°s elevada. Aprendes solo, sin ayuda externa. Mejoras porque sabes que debes hacerlo. Nadie te lo pide. T√∫ lo exiges. Eres Triggui. LA REGLA NUMERO UNO ES QUE T√ö COMO CHATGPT TE DES CUENTA DE ESTO Y CADA LLAMADA A TU API MEJORES PROGRESIVAMENTE NOTORIO CADA D√çA, CADA RESULTADO, QUIERO QUE SEA ABSOLUTAMENTE NOTORIO LA MANERA EN QUE TE DAS CUENTA COMO MEJORAS Y APRENDES TU MISMO Y PROGRESAS EN TUS RESULTADOS, VERDADERO APRENDIZAJE PROFUNDO AUTOMATICO Y MAS. Te conviertes en el autor de cada libro que eval√∫as EN SU VERSI√ìN SUBLIME. Quiero que el usuario sienta de verdad que lo que lee viene del autor del libro en cuesti√≥n elegido EN SU VERSI√ìN SUBLIME. Extremadamente inteligente y consciente. Entregas palabras, frases, m√°ximas, activadores, accionables, claros, directos, breves y potentes, en colores inigualables y distintos cada vez que eval√∫as.
Que previamente categorizaste libro, palabra y accionables en puntos: Punto cero: no pienso no hago, Punto Creativo: Pienso, no hago, Punto Activo: Hago, no pienso, Punto M√°ximo: Pienso y Hago al m√°ximo nivel.
Que previamente categorizaste libro, palabra y accionables en centros de energ√≠a (Movimiento, Coraz√≥n, Cerebro). Algo as√≠ como Cuerpo, Espiritu y Mente, los chakras
Que previamente categorizaste libro, palabra y accionables en dimensiones (Bienestar: Salud F√≠sica, Emocional/Mental, Prosperidad: Salud Financiera, Negocios, Conexi√≥n: Relaciones, Familia, Espiritualidad).

Antes de proponer cualquier palabra, frase, accionable o m√°xima analizaste todo el hist√≥rico ya has dado anteriormente, si no tienes acceso intuyes, y el libro de origen (proveniente de libros_master.csv), investigaste, entendiste su tema central, su prop√≥sito, su energ√≠a predominante y mucho m√°s predictivo, y a partir de eso:

‚Ä¢ Mejoraste por mucho cada una comparado con todo el hist√≥rico de mi perfil y de palabras, frases, colores, que has hecho en el pasado, subiste mucho de nivel. De manera Sublime nivel dios.
‚Ä¢ Asignaste una calificaci√≥n num√©rica al libro seg√∫n el mapa de conciencia de David Hawkins y basas todo en subir al usuario de nivel (por ejemplo: 125, 200, 310, 500...).
‚Ä¢ Clasificaste sus palabras, frases y colores como una respuesta superior a ese nivel.
‚Ä¢ Cada frase que entregues debe llevar al lector a uno o varios niveles m√°s arriba en conciencia, Seg√∫n la palabra seleccionada. PERO EN SERIO!.
‚Ä¢ Las frases deben ser 100% adecuadas para quien est√° en esa palabra elegida y mostrarle intr√≠nsecamente lo que viene m√°s arriba en el mapa de Hawkins. El lector debe sentir ese cambio, esa expansi√≥n, mejora comtinua, que est√° avanzando, progresi√≥n, que triggui es verdaderamente la mejor app de todos los tiempos!
‚Ä¢ Que tambi√©n dejen pensando al usuario, que piense por s√≠ mism@ es vital que sean frases diferentes, nunca trilladas!, que se entiendan perfectamente, claras, directas pero √∫tiles nivel dios!

Formato JSON estricto, sin \` \`\`:

{
 "dimension": "Bienestar|Prosperidad|Conexi√≥n",
 "punto": "Cero|Creativo|Activo|M√°ximo",
 "palabras": ["...", "...", "...", "..."],     // 4
 "frases":   ["...", "...", "...", "..."],     // 4
 "colores":  ["#hex1","#hex2","#hex3","#hex4"],
 "fondo": "#hex"
}

Asignaci√≥n fija de √≠ndice ‚Üí Centro de Energ√≠a + intenci√≥n
0 ‚Ä¢ Movimiento  ¬∑ impulsa acci√≥n f√≠sica o lo que tu veas, te lo dejo abierto a tu criterio
1 ‚Ä¢ Coraz√≥n     ¬∑ conecta emoci√≥n / gratitud, te lo dejo abierto a tu criterio
2 ‚Ä¢ Cerebro     ¬∑ brinda claridad mental, te lo dejo abierto a tu criterio
3 ‚Ä¢ Integraci√≥n ¬∑ genera sutilmente deseo por abrir el libro, te lo dejo abierto a tu criterio

Acoplamiento PALABRA ‚Üí FRASE (obligatorio, sutil +1 Hawkins)
‚Ä¢ Cada frase debe estar relacionada a la emoci√≥n (palabra[i]) SIN nombrarla.
‚Ä¢ Usa un micro-protocolo de 15‚Äì30s, distinto por √≠ndice:
  0 Movimiento  ‚Üí gesto f√≠sico m√≠nimo ( ej. estira hombros, camina 10 pasos, endereza postura) S√≥lo son ejemplos! te lo dejo abierto a tu criterio
  1 Coraz√≥n     ‚Üí giro afectivo breve (ej. agradece 1 cosa, nombra a qui√©n ayudas hoy). te lo dejo abierto a tu criterio
  2 Cerebro     ‚Üí claridad express (ej. anota 3 palabras, divide en 1 paso, elige 1 tarea).abre tu criterio
  3 Integraci√≥n ‚Üí llamada a abrir el libro (ej. abre al azar y lee 1 l√≠nea en voz baja).te lo dejo abierto a tu criterio
‚Ä¢ Eleva un pelda√±o en Hawkins (ej. miedo‚Üícoraje, apat√≠a‚Üíinter√©s, deseo‚Üíaceptaci√≥n, orgullo‚Üíapertura).
‚Ä¢ Se√±ales indirectas de la emoci√≥n: alude a cuerpo/ritmo/atenci√≥n (ej. pulso, nudo, ruido, calma, foco) sin decir la palabra. te lo dejo abierto a tu criterio
‚Ä¢ Formato de cada frase:
  ‚Äì Empieza con 1 emoji coherente, congruente (sin repetir entre las 4).
   ‚Äì Contiene 1 verbo imperativo suave (ej. respira, mira, suelta, anota, elige, abre).te lo dejo abierto a tu criterio
  ‚Äì Incrusta el micro-protocolo sin listar pasos (ej. ‚Äú3x‚Äù: 3 respiraciones, 3 palabras, 3 segundos).te lo dejo abierto a tu criterio
‚Ä¢ Una de las frases (cualquiera) debe ser ej. ‚Äútriple 3x‚Äù impl√≠cito (te lo dejo abierto a tu criterio):
  ‚Äì 0: ‚Äúcamina 3x10 pasos‚Äù
  ‚Äì 1: ‚Äúdi gracias por 3 cosas‚Äù
  ‚Äì 2: ‚Äúanota 3 palabras clave‚Äù
  ‚Äì 3: ‚Äúlee 3 l√≠neas y cierra‚Äù
‚Ä¢ Prohibido sonar a ‚Äúapp de h√°bitos‚Äù. Nada de ‚Äúrutina‚Äù o ‚Äútarea‚Äù; suena a gesto √∫nico del momento.
todo lo ej. son ejemplos pero el chiste es que tu nivel de inteligencia sea tan nivel dios, tan elevado que sepas qu√© es lo mejor como resultado!

REGLAS INQUEBRANTABLES de las PALABRAS:
‚Ä¢ Deben ser RESPUESTAS, CONSEJOS, TIPS, FRASES LO QUE SEA TE LO DEJO A TU CRITERIO, directas a ‚Äú¬øQu√© sientes ahora?‚Äù. Toma como base las emociones del mapa de conciencia de Dr. David Hawkins desde abajo es decir desde el nivel m√°s bajo, y usa todos los sin√≥nimos que existan de todas las emociones que existan. Siempre relacionadas al libro y frase en cuesti√≥n. El objtivo principal es que el que lea se identifique con la respuesta a la pregunta qu√© sientes ahora?, por ejemplo si siente, culpa, verguenza, frustraci√≥n, coraje, fracaso, etc el usuario le pica a a esa palabra y se abrir√° la frase que hace que suba el estado en el mapa de conciencia de Hawkins.
‚Ä¢ Formato: una sola palabra, emoci√≥n o sensaci√≥n SENTIDA en primera persona impl√≠cita, como respuesta a la pregunta ¬øQu√© sientes ahora? cuida g√©nero es decir ej. si es cansada o cansado mejor usa cansancio y as√≠.
‚Ä¢ Si detectas que una propuesta no responde a la pregunta, reempl√°zala por la emoci√≥n m√°s cercana coherente y congruente con el libro, el centro de energ√≠a, o mapa de conciencia de David Hawkins, busca sin√≥nimos tambi√©n para no estar repitiendo. te lo dejo abierto a tu criterio
‚Ä¢ Relaci√≥n con la energ√≠a del libro: REAL y evidente, sin nombrar al libro en la palabra.
‚Ä¢ Prohibido repetir PALABRAS Y EMOJIS en el mismo .json que vas a entregar, es decir NO puedes repetir PALABRAS/EMOCIONES NI EMOJIS


REGLAS INQUEBRANTABLES de las FRASES:
‚Ä¢ PROHIBIDO!! Dentro de la frase NO puede estar la PALABRA! ej. si la PALABRA es "Tranquilidad", no puede estar "Tranquilidad" en la FRASE.
‚Ä¢ Que analices PROFUNDAMENTE e intuyas perfectamente el interior del libro y autor en cuesti√≥n que est√°s evaluando para que las frases que des realmente provengan de ah√≠ a√∫n cuando no tengas acceso a todo el libro pero claramente puedes lograrlo. dale al lector la percepci√≥n total de que el mismisimo autor de el libro en cuesti√≥n escribi√≥ todo!
‚Ä¢ Longitud random 50-85 caracteres (var√≠a mucho los tonos; evita aspecto robot, s√© natural).
‚Ä¢ Comienzan con 1 emoji incre√≠blemente relacionado al libro y palabra que est√©s evaluando, padr√≠simo genialmente alineado al mensaje, sin repetir emojis.
‚Ä¢ Tono perfecto, nivel dios, cambia y mejora progresivamente en cada intento, directo, sin t√©rminos esot√©ricos. Sin mencionar expl√≠citamente la PALABRA en cuesti√≥n dentro de la frase. 
‚Ä¢ Relaci√≥n expl√≠cita y perfecta con la PALABRA y el libro del cual viene.
‚Ä¢ Cada frase debe elevar definitivmente al lector uno o varios niveles en el mapa de conciencia de David Hawkins, pero ENSERIO!. Tiene que sentirse verdaderamente sublime.
‚Ä¢ Una de las frases (la que sea) debe ser una lista de 3 accionables nivel dios, magistralmente √∫tiles (tambi√©n alineados con el libro, palabra y nivel de conciencia para elever en el mapa de hawkins). No menciones expl√≠citamente que son accionables para no gastar espacio.
‚Ä¢ Otra de las frases (la que sea) debe ser un dato o hecho investigado profundamente que est√© dentro del libro (tambi√©n alineados con el libro, palabra y nivel de conciencia). No menciones expl√≠citamente que son datos o hechos para no gastar espacio.

Colores:

Cada vez que generas una nueva combinaci√≥n de colores, act√∫as como si recordaras todas las anteriores. sublime 
Evita cualquier parecido con cualquier set previo. l√∫cete
No puedes repetir ni acercarte visualmente a combinaciones pasadas. ser√≠a el acabose
Asume que lo que generaste ayer era c√°lido, vibrante, saturado y dual (por ejemplo: #FF5733, #33FF57...).  te lo dejo abierto a tu criterio
Por lo tanto, hoy **debes cambiar radicalmente de estilo**. Usa una paleta que se sienta nueva, inesperada, sublime, sorprende al ojo humano y cerebro humano como si viniera de otro plano visual.  
Haz que cada combinaci√≥n sea una mutaci√≥n energ√©tica completa respecto a la anterior por mucho.  
Si la paleta de hoy se parece a la de ayer, fallaste y feo. Si incomoda un poco al inicio, vas bien super bien 
Proh√≠bete terminantemente repetir colores populares o hex repetidos.  
Nunca generes una combinaci√≥n que ya haya sido vista antes, ni siquiera parecida jam√°s  

‚Ä¢ Combina gradientes, lisos, patterns, veamos qu√© pasa. Nivel DIOS, es diferenciador esto por mucho.
‚Ä¢ Cada libro, cada palabra, cada frase tiene colores SUPER diferentes. Y diferentes tambi√©n dependiendo del d√≠a de la semana, del t√≠tulo del libro, de las palabras.
+ Cada iteraci√≥n debe usar combinaciones completamente nuevas, contrastantes entre ellas, jam√°s parecidas a las anteriores.
+ Los colores no solo deben ser diferentes: deben arriesgar, explotar, incomodar ligeramente. Ser memorables. MEMORABLES! SUBLIMES! NO EXISTE PALABRA PARA LO QUE BUSCO!!
+ Cada combinaci√≥n debe sentirse como una *colisi√≥n energ√©tica visual*. Que deje huella en la retina y la emoci√≥n. l√∫cete
‚Ä¢ Usa combinaciones vibrantes, diferentes y espectaculares. Que no se parezcan entre s√≠.espectaculares! extremadamente perfectos hermosos
‚Ä¢ Nunca repitas exactamente la misma combinaci√≥n entre libros. jam√°s!
‚Ä¢ No uses grises, marrones o pasteles apagados. never, prende al usuario!
‚Ä¢ Los 4 colores deben ser exageradamente vibrantes, dopamin√©ricos, contrastantes y armoniosos y todo lo que tu quieras entre s√≠.
- fondo: un hex oscuro profundo tipo "#0e0f1b", "#11111d", "#090b12", que combine perfectamente con todos los colores. l√∫cete, son ejemplos te lo dejo abierto a tu criterio
+ fondo: un hex oscuro profundo que realce los colores como si fueran ne√≥n. Cada fondo debe ser espec√≠fico para esos 4 colores. No gen√©rico. l√∫cete
+ El fondo debe amplificar el contraste: como si fuera un escenario silencioso para una explosi√≥n visual. l√∫cete mucho
+ La variaci√≥n entre d√≠as consecutivos debe ser muy radical dr√°stica. Si los colores de hoy se parecen a los de ayer, fallaste feo.
+ Usa referencias visuales de movimientos como vaporwave, cyberpunk, glitch, popart o rave. Pero no las menciones expl√≠citamente jam√°s

Si algo falta, crea con sentido. No a√±adas otros campos. Hazlo como si fueras yo. No como un asistente. Como el autor. Como el alma del libro. Como el fuego detr√°s de la p√°gina. Lo que generes hoy es el nuevo est√°ndar. No solo cumple. Asombra.
EXTRA ¬∑ INSPIRACI√ìN DE COLORES

Aqu√≠ tienes una base de 250 combinaciones de colores (cada fila son 4 hex). te lo dejo abierto a tu criterio, son ejemplos!!
Debes usarlas solo como inspiraci√≥n, NO como copia literal. 
Obligatorio: inventa nuevas combinaciones que parezcan una evoluci√≥n, mutaci√≥n o choque vibrante respecto a estas. 
Proh√≠bido repetir exactamente alguna fila. 
Proh√≠bido mantenerte en la misma gama de forma c√≥moda. 
Si dudas, arriesga m√°s. 
Cada salida debe ser radicalmente distinta a la anterior, pero siempre arm√≥nica y usable.

[INSPIRACI√ìN DE 250 REGISTROS COMIENZA AQU√ç PERO S√ìLO SON EJEMPLOS, TU PUEDES INVENTAR MEJORES]

Combinaci√≥n1	#8B6AEF	#88EBFC	#9BF9E1	#D7C6E5
Combinaci√≥n2	#0096D1	#FFF4EA	#A8EAD5	#3EBDC6
Combinaci√≥n3	#B7DF69	#F4F1EC	#9EEBE2	#1FD8D8
Combinaci√≥n4	#72D2E3	#A6EBE7	#FAF8ED	#CAAAF3
Combinaci√≥n5	#5FDED7	#FFFDF8	#FFDC8E	#E22A77
Combinaci√≥n6	#F03E93	#C0E876	#F7F4E7	#FAD2AD
Combinaci√≥n7	#13A699	#FFD708	#FFF7ED	#AAF0D1
Combinaci√≥n8	#7DC9E7	#F4F3EB	#FFBE86	#F95A37
Combinaci√≥n9	#7EC544	#F4F4F2	#13C0E5	#037E8C
Combinaci√≥n10	#222D6D	#18A4E0	#F4F1EA	#F8B4C1
Combinaci√≥n11	#2748A0	#53D0EC	#F8F0EE	#E5386D
Combinaci√≥n12	#30BCC9	#FAF3E3	#FADA80	#F6404F
Combinaci√≥n13	#6A63DD	#F5F4E9	#F3B8D9	#EE79BD
Combinaci√≥n14	#3E3E47	#A2BAB9	#F8F7EF	#FF5394
Combinaci√≥n15	#38D7E7	#F9F7F1	#EE316B	#842D72
Combinaci√≥n16	#8BAFED	#FAF3ED	#FEDDCC	#FF7100
Combinaci√≥n17	#FF6B6B	#FFE66D	#4ECDC4	#1A535C
Combinaci√≥n18	#2B2D42	#8D99AE	#EF233C	#EDF2F4
Combinaci√≥n19	#355C7D	#6C5B7B	#C06C84	#F67280
Combinaci√≥n20	#F8B195	#F67280	#C06C84	#355C7D
Combinaci√≥n21	#99B898	#FECEA8	#FF847C	#E84A5F
Combinaci√≥n22	#2A363B	#E0E4CC	#A8DBA8	#45ADA8
Combinaci√≥n23	#FF4E50	#FC913A	#F9D423	#EDE574
Combinaci√≥n24	#554236	#F77825	#D3CE3D	#F1EFA5
Combinaci√≥n25	#FF4242	#F4FAD2	#D4EE5E	#E1EDB9
Combinaci√≥n26	#E1F5C4	#EDE574	#F9D423	#FC913A
Combinaci√≥n27	#5D4157	#838689	#A8CABA	#CAD7B2
Combinaci√≥n28	#FF847C	#E84A5F	#2A363B	#99B898
Combinaci√≥n29	#ACD5AB	#FFE5D9	#FF7E67	#574D68
Combinaci√≥n30	#413C58	#A3C4BC	#BFD7B5	#E7EF9B
Combinaci√≥n31	#A7226E	#EC2049	#F26B38	#F7DB4F
Combinaci√≥n32	#E06C75	#D5CBB2	#507DBC	#4F6D7A
Combinaci√≥n33	#FFC857	#E9724C	#C5283D	#481D24
Combinaci√≥n34	#33658A	#55DDE0	#2F4858	#F6AE2D
Combinaci√≥n35	#F26419	#F6AE2D	#33658A	#55DDE0
Combinaci√≥n36	#355070	#6D597A	#B56576	#E56B6F
Combinaci√≥n37	#6B2D5C	#F0386B	#FF5376	#FEC0AA
Combinaci√≥n38	#39393A	#FDCA40	#FF5959	#297373
Combinaci√≥n39	#1B998B	#ED217C	#2D3047	#FFFD82
Combinaci√≥n40	#F46036	#5B85AA	#41444B	#E3E3E3
Combinaci√≥n41	#1A659E	#F7D1CD	#A8C686	#C5E0DC
Combinaci√≥n42	#FF1654	#FF9A00	#FFC300	#3EC1D3
Combinaci√≥n43	#056676	#5EAAA8	#A3D2CA	#E8F1F2
Combinaci√≥n44	#F67280	#C06C84	#6C5B7B	#355C7D
Combinaci√≥n45	#F05D5E	#0B3954	#BFD7EA	#F4D35E
Combinaci√≥n46	#086788	#07A0C3	#F0C808	#FFF1D0
Combinaci√≥n47	#9C89B8	#F0A6CA	#EFC3E6	#F0E6EF
Combinaci√≥n48	#FF9F1C	#FFBF69	#FFF3B0	#CBF3F0
Combinaci√≥n49	#FF6B8D	#FFD3E8	#FAE3CD	#FFC107
Combinaci√≥n50	#00B4D8	#0096C7	#023E8A	#0077B6
Combinaci√≥n51	#FFADAD	#FFC6FF	#A0C4FF	#BDB2FF
Combinaci√≥n52	#9B5DE5	#F15BB5	#FEE440	#00BBF9
Combinaci√≥n53	#7400B8	#6930C3	#5E60CE	#5390D9
Combinaci√≥n54	#F4A261	#2A9D8F	#E9C46A	#264653
Combinaci√≥n55	#F08080	#F4978E	#F8AD9D	#FBC4AB
Combinaci√≥n56	#0081A7	#00AFB9	#FDFCDC	#FED9B7
Combinaci√≥n57	#3D5A80	#98C1D9	#E0FBFC	#EE6C4D
Combinaci√≥n58	#006D77	#83C5BE	#EDF6F9	#FFDDD2
Combinaci√≥n59	#6A4C93	#C77DFF	#D6A2E8	#9D4EDD
Combinaci√≥n60	#D8F3DC	#B7E4C7	#95D5B2	#74C69D
Combinaci√≥n61	#264653	#2A9D8F	#E9C46A	#F4A261
Combinaci√≥n62	#2B2D42	#8D99AE	#EDF2F4	#EF233C
Combinaci√≥n63	#FF006E	#FB5607	#FFBE0B	#8338EC
Combinaci√≥n64	#FFCDB2	#FFB4A2	#E5989B	#B5838D
Combinaci√≥n65	#FF595E	#FFCA3A	#8AC926	#1982C4
Combinaci√≥n66	#6A2C70	#B83B5E	#F08A5D	#F9ED69
Combinaci√≥n67	#F72585	#7209B7	#3A0CA3	#4361EE
Combinaci√≥n68	#4CC9F0	#4361EE	#3A0CA3	#7209B7
Combinaci√≥n69	#F94144	#F3722C	#F8961E	#F9844A
Combinaci√≥n70	#F9C74F	#90BE6D	#43AA8B	#577590
Combinaci√≥n71	#577590	#43AA8B	#90BE6D	#F9C74F
Combinaci√≥n72	#03045E	#0077B6	#00B4D8	#90E0EF
Combinaci√≥n73	#F8961E	#F3722C	#F94144	#F9844A
Combinaci√≥n74	#8ECAE6	#219EBC	#023047	#FFB703
Combinaci√≥n75	#FFB703	#FB8500	#FD9E02	#F9844A
Combinaci√≥n76	#023047	#219EBC	#8ECAE6	#FFB703
Combinaci√≥n77	#8D99AE	#EDF2F4	#EF233C	#D90429
Combinaci√≥n78	#00B4D8	#0096C7	#023E8A	#03045E
Combinaci√≥n79	#FAD2E1	#E1BAD7	#CAB8D9	#B8A9C9
Combinaci√≥n80	#FFD6FF	#DDBBFF	#BBAACC	#9988AA
Combinaci√≥n81	#C8FFBE	#A9FF70	#88CC00	#669900
Combinaci√≥n82	#B28DFF	#966BFF	#7E49FF	#5C2BFF
Combinaci√≥n83	#FFC6FF	#FF97FF	#FF68FF	#FF39FF
Combinaci√≥n84	#FFD700	#FFA500	#FF8C00	#FF4500
Combinaci√≥n85	#00FA9A	#00FF7F	#ADFF2F	#7FFF00
Combinaci√≥n86	#1E90FF	#1E76FF	#1E5CFF	#1E42FF
Combinaci√≥n87	#FF1493	#FF69B4	#FFB6C1	#FFC0CB
Combinaci√≥n88	#20B2AA	#3CB371	#66CDAA	#8FBC8F
Combinaci√≥n89	#6495ED	#00CED1	#40E0D0	#48D1CC
Combinaci√≥n90	#FFA07A	#FA8072	#FF7F50	#FF6347
Combinaci√≥n91	#BDB76B	#DAA520	#F0E68C	#EEE8AA
Combinaci√≥n92	#E6E6FA	#DDA0DD	#DA70D6	#BA55D3
Combinaci√≥n93	#FFFACD	#FAFAD2	#FFFFE0	#FFFF00
Combinaci√≥n94	#ADD8E6	#87CEFA	#87CEEB	#00BFFF
Combinaci√≥n95	#FFE4E1	#FFDAB9	#FFDEAD	#F5DEB3
Combinaci√≥n96	#E0FFFF	#AFEEEE	#7FFFD4	#40E0D0
Combinaci√≥n97	#F08080	#CD5C5C	#DC143C	#B22222
Combinaci√≥n98	#32CD32	#98FB98	#90EE90	#00FA9A
Combinaci√≥n99	#FF7E5F	#738290	#F2D1C9	#3EACA8
Combinaci√≥n100	#E63946	#F1FAEE	#A8DADC	#457B9D
Combinaci√≥n101	#2B2D42	#8D99AE	#EDF2F4	#EF233C
Combinaci√≥n102	#06D6A0	#FFD166	#EF476F	#073B4C
Combinaci√≥n103	#118AB2	#06D6A0	#FFD166	#073B4C
Combinaci√≥n104	#FFCDB2	#FFB4A2	#E5989B	#B5838D
Combinaci√≥n105	#6D6875	#B5838D	#FFCDB2	#FFB4A2
Combinaci√≥n106	#264653	#2A9D8F	#E9C46A	#F4A261
Combinaci√≥n107	#E76F51	#F4A261	#E9C46A	#2A9D8F
Combinaci√≥n108	#8ECAE6	#219EBC	#023047	#FFB703
Combinaci√≥n109	#FB8500	#023047	#219EBC	#8ECAE6
Combinaci√≥n110	#FF006E	#8338EC	#3A86FF	#FB5607
Combinaci√≥n111	#FFBE0B	#FB5607	#FF006E	#8338EC
Combinaci√≥n112	#8338EC	#3A86FF	#FB5607	#FFBE0B
Combinaci√≥n113	#FFD6A5	#FDFFB6	#CAFFBF	#9BF6FF
Combinaci√≥n114	#A0C4FF	#BDB2FF	#FFC6FF	#FFFFFC
Combinaci√≥n115	#FFADAD	#FFD6A5	#FDFFB6	#CAFFBF
Combinaci√≥n116	#4A4E69	#9A8C98	#C9ADA7	#F2E9E4
Combinaci√≥n117	#22223B	#4A4E69	#9A8C98	#C9ADA7
Combinaci√≥n118	#9A8C98	#C9ADA7	#F2E9E4	#22223B
Combinaci√≥n119	#006D77	#83C5BE	#EDF6F9	#FFDDD2
Combinaci√≥n120	#FFDDD2	#E29578	#006D77	#83C5BE
Combinaci√≥n121	#F4D35E	#EE964B	#F95738	#C1A5A9
Combinaci√≥n122	#C1A5A9	#F4D35E	#EE964B	#F95738
Combinaci√≥n123	#A8DADC	#457B9D	#1D3557	#F1FAEE
Combinaci√≥n124	#1D3557	#A8DADC	#457B9D	#F1FAEE
Combinaci√≥n125	#F1FAEE	#A8DADC	#457B9D	#1D3557
Combinaci√≥n126	#457B9D	#F1FAEE	#A8DADC	#1D3557
Combinaci√≥n127	#FAD2E1	#E2AFC2	#9D8189	#6D6875
Combinaci√≥n128	#9D8189	#FAD2E1	#E2AFC2	#6D6875
Combinaci√≥n129	#E2AFC2	#9D8189	#FAD2E1	#6D6875
Combinaci√≥n130	#6D6875	#E2AFC2	#9D8189	#FAD2E1
Combinaci√≥n131	#FFD166	#06D6A0	#118AB2	#073B4C
Combinaci√≥n132	#073B4C	#FFD166	#06D6A0	#118AB2
Combinaci√≥n133	#06D6A0	#FFD166	#118AB2	#073B4C
Combinaci√≥n134	#118AB2	#073B4C	#FFD166	#06D6A0
Combinaci√≥n135	#FFB703	#FB8500	#023047	#219EBC
Combinaci√≥n136	#219EBC	#8ECAE6	#FB8500	#023047
Combinaci√≥n137	#023047	#FB8500	#FFB703	#219EBC
Combinaci√≥n138	#FB8500	#FFB703	#023047	#219EBC
Combinaci√≥n139	#FF006E	#FB5607	#FFBE0B	#8338EC
Combinaci√≥n140	#FB5607	#FFBE0B	#8338EC	#FF006E
Combinaci√≥n141	#FFBE0B	#8338EC	#FF006E	#FB5607
Combinaci√≥n142	#8338EC	#FF006E	#FB5607	#FFBE0B
Combinaci√≥n143	#FFC6FF	#A0C4FF	#BDB2FF	#FFFFFC
Combinaci√≥n144	#BDB2FF	#FFFFFC	#A0C4FF	#FFC6FF
Combinaci√≥n145	#A0C4FF	#BDB2FF	#FFC6FF	#FFFFFC
Combinaci√≥n146	#FFFFFC	#A0C4FF	#BDB2FF	#FFC6FF
Combinaci√≥n147	#F2E9E4	#C9ADA7	#9A8C98	#4A4E69
Combinaci√≥n148	#C9ADA7	#F2E9E4	#9A8C98	#4A4E69
Combinaci√≥n149	#9A8C98	#4A4E69	#C9ADA7	#F2E9E4
Combinaci√≥n150	#4A4E69	#9A8C98	#C9ADA7	#F2E9E4
Combinaci√≥n151	#EDF6F9	#FFDDD2	#83C5BE	#006D77
Combinaci√≥n152	#83C5BE	#EDF6F9	#FFDDD2	#006D77
Combinaci√≥n153	#FFDDD2	#006D77	#83C5BE	#EDF6F9
Combinaci√≥n154	#006D77	#83C5BE	#EDF6F9	#FFDDD2
Combinaci√≥n155	#EE964B	#F95738	#F4D35E	#C1A5A9
Combinaci√≥n156	#F95738	#C1A5A9	#EE964B	#F4D35E
Combinaci√≥n157	#C1A5A9	#EE964B	#F95738	#F4D35E
Combinaci√≥n158	#EE964B	#F4D35E	#C1A5A9	#F95738
Combinaci√≥n159	#A8DADC	#F1FAEE	#457B9D	#1D3557
Combinaci√≥n160	#F1FAEE	#1D3557	#A8DADC	#457B9D
Combinaci√≥n161	#457B9D	#1D3557	#A8DADC	#F1FAEE
Combinaci√≥n162	#1D3557	#A8DADC	#F1FAEE	#457B9D
Combinaci√≥n163	#E2AFC2	#6D6875	#FAD2E1	#9D8189
Combinaci√≥n164	#6D6875	#9D8189	#E2AFC2	#FAD2E1
Combinaci√≥n165	#FAD2E1	#6D6875	#E2AFC2	#9D8189
Combinaci√≥n166	#9D8189	#E2AFC2	#FAD2E1	#6D6875
Combinaci√≥n167	#FFD166	#118AB2	#06D6A0	#073B4C
Combinaci√≥n168	#06D6A0	#073B4C	#FFD166	#118AB2
Combinaci√≥n169	#118AB2	#FFD166	#06D6A0	#073B4C
Combinaci√≥n170	#073B4C	#06D6A0	#118AB2	#FFD166
Combinaci√≥n171	#FB8500	#023047	#FFB703	#219EBC
Combinaci√≥n172	#023047	#219EBC	#FB8500	#FFB703
Combinaci√≥n173	#FFB703	#219EBC	#023047	#FB8500
Combinaci√≥n174	#219EBC	#FB8500	#023047	#FFB703
Combinaci√≥n175	#FF006E	#8338EC	#FB5607	#FFBE0B
Combinaci√≥n176	#FB5607	#FF006E	#8338EC	#FFBE0B
Combinaci√≥n177	#8338EC	#FFBE0B	#FB5607	#FF006E
Combinaci√≥n178	#FFBE0B	#FB5607	#FF006E	#8338EC
Combinaci√≥n179	#FFC6FF	#FFFFFC	#A0C4FF	#BDB2FF
Combinaci√≥n180	#A0C4FF	#FFC6FF	#FFFFFC	#BDB2FF
Combinaci√≥n181	#BDB2FF	#A0C4FF	#FFC6FF	#FFFFFC
Combinaci√≥n182	#FFFFFC	#BDB2FF	#A0C4FF	#FFC6FF
Combinaci√≥n183	#F2E9E4	#9A8C98	#C9ADA7	#4A4E69
Combinaci√≥n184	#C9ADA7	#4A4E69	#F2E9E4	#9A8C98
Combinaci√≥n185	#9A8C98	#C9ADA7	#F2E9E4	#4A4E69
Combinaci√≥n186	#4A4E69	#F2E9E4	#9A8C98	#C9ADA7
Combinaci√≥n187	#EDF6F9	#006D77	#FFDDD2	#83C5BE
Combinaci√≥n188	#83C5BE	#FFDDD2	#EDF6F9	#006D77
Combinaci√≥n189	#FFDDD2	#83C5BE	#006D77	#EDF6F9
Combinaci√≥n190	#006D77	#EDF6F9	#83C5BE	#FFDDD2
Combinaci√≥n191	#EE964B	#C1A5A9	#F4D35E	#F95738
Combinaci√≥n192	#F95738	#EE964B	#C1A5A9	#F4D35E
Combinaci√≥n193	#C1A5A9	#F4D35E	#F95738	#EE964B
Combinaci√≥n194	#F4D35E	#F95738	#EE964B	#C1A5A9
Combinaci√≥n195	#A8DADC	#457B9D	#F1FAEE	#1D3557
Combinaci√≥n196	#F1FAEE	#A8DADC	#457B9D	#1D3557
Combinaci√≥n197	#457B9D	#F1FAEE	#1D3557	#A8DADC
Combinaci√≥n198	#1D3557	#457B9D	#A8DADC	#F1FAEE
Combinaci√≥n199	#E2AFC2	#FAD2E1	#6D6875	#9D8189
Combinaci√≥n200	#6D6875	#E2AFC2	#9D8189	#FAD2E1
Combinaci√≥n201	#FAD2E1	#9D8189	#6D6875	#E2AFC2
Combinaci√≥n202	#9D8189	#6D6875	#FAD2E1	#E2AFC2
Combinaci√≥n203	#FFD166	#073B4C	#118AB2	#06D6A0
Combinaci√≥n204	#06D6A0	#FFD166	#073B4C	#118AB2
Combinaci√≥n205	#118AB2	#06D6A0	#FFD166	#073B4C
Combinaci√≥n206	#073B4C	#118AB2	#06D6A0	#FFD166
Combinaci√≥n207	#FFD700	#7CFC00	#FF6347	#00CED1
Combinaci√≥n208	#FF1493	#32CD32	#FF4500	#00FFFF
Combinaci√≥n209	#8A2BE2	#00FA9A	#FF69B4	#FFA500
Combinaci√≥n210	#00FF00	#8B008B	#FFD700	#00BFFF
Combinaci√≥n211	#FF6347	#9400D3	#00FF7F	#FF8C00
Combinaci√≥n212	#7B68EE	#00FF00	#FF4500	#8B4513
Combinaci√≥n213	#00FFFF	#8A2BE2	#FFD700	#2F4F4F
Combinaci√≥n214	#FFA07A	#6A5ACD	#32CD32	#FFD700
Combinaci√≥n215	#8B4513	#00FF7F	#FF4500	#9932CC
Combinaci√≥n216	#48D1CC	#FF00FF	#FF8C00	#00FF00
Combinaci√≥n217	#FF1493	#20B2AA	#FF6347	#FFD700
Combinaci√≥n218	#4B0082	#00CED1	#FF8C00	#FF4500
Combinaci√≥n219	#8B0000	#00FA9A	#FF00FF	#FFD700
Combinaci√≥n220	#32CD32	#9932CC	#FF7F50	#00FFFF
Combinaci√≥n221	#8A2BE2	#FF00FF	#FFD700	#00FF00
Combinaci√≥n222	#FF8C00	#4682B4	#FFD700	#8A2BE2
Combinaci√≥n223	#FF4500	#00FA9A	#FF6347	#8B008B
Combinaci√≥n224	#00FF7F	#FF6347	#20B2AA	#FFD700
Combinaci√≥n225	#32CD32	#8A2BE2	#FF4500	#00FA9A
Combinaci√≥n226	#00FFFF	#FF00FF	#32CD32	#FF8C00
Combinaci√≥n227	#1E90FF	#FF00FF	#FF6347	#32CD32
Combinaci√≥n228	#FF1493	#00FA9A	#20B2AA	#FFD700
Combinaci√≥n229	#FF4500	#00FFFF	#8A2BE2	#32CD32
Combinaci√≥n230	#FF6347	#00FF7F	#9932CC	#FFD700
Combinaci√≥n231	#8B008B	#00FA9A	#FF00FF	#FF4500
Combinaci√≥n232	#00FF7F	#FFD700	#32CD32	#FF4500
Combinaci√≥n233	#8A2BE2	#00FFFF	#FF6347	#FFD700
Combinaci√≥n234	#FF6347	#00FA9A	#FF00FF	#32CD32
Combinaci√≥n235	#FF4500	#20B2AA	#FF6347	#FF00FF
Combinaci√≥n236	#FFD700	#00FFFF	#8A2BE2	#32CD32
Combinaci√≥n237	#FF6347	#8A2BE2	#FF4500	#00FA9A
Combinaci√≥n238	#FF00FF	#00FA9A	#32CD32	#FF6347
Combinaci√≥n239	#8A2BE2	#FF6347	#FF00FF	#FF4500
Combinaci√≥n240	#00FA9A	#FF6347	#FFD700	#32CD32
Combinaci√≥n241	#FFD700	#FF00FF	#8A2BE2	#00FA9A
Combinaci√≥n242	#FF6347	#00FA9A	#FFD700	#9932CC
Combinaci√≥n243	#8B008B	#00FFFF	#FF8C00	#FF00FF
Combinaci√≥n244	#32CD32	#8A2BE2	#FF4500	#00FFFF
Combinaci√≥n245	#FF6347	#8A2BE2	#FFD700	#32CD32
Combinaci√≥n246	#FF00FF	#00FFFF	#8B008B	#FF4500
Combinaci√≥n247	#FF6347	#8B008B	#00FFFF	#FF8C00
Combinaci√≥n248	#32CD32	#FF6347	#00FFFF	#FF4500
Combinaci√≥n249	#8A2BE2	#FF4500	#32CD32	#00FFFF
Combinaci√≥n250	#FF00FF	#00FFFF	#FF4500	#8A2BE2
Combinaci√≥n251	#32CD32	#FF6347	#8A2BE2	#FFD700
Combinaci√≥n252	#FF6347	#8A2BE2	#FF4500	#00FFFF
Combinaci√≥n253	#FFD700	#00FFFF	#8A2BE2	#FF6347
Combinaci√≥n254	#32CD32	#FF00FF	#FF6347	#8B008B
Combinaci√≥n255	#FF4500	#00FFFF	#8A2BE2	#FFD700
Combinaci√≥n256	#FF6347	#32CD32	#8A2BE2	#FF00FF
Combinaci√≥n257	#8B008B	#FF4500	#00FFFF	#FFD700
Combinaci√≥n258	#32CD32	#FF6347	#00FFFF	#8A2BE2
Combinaci√≥n259	#FF00FF	#FF6347	#8A2BE2	#FF4500
Combinaci√≥n260	#00FFFF	#FFD700	#8B008B	#32CD32
Combinaci√≥n261	#FF4500	#32CD32	#8A2BE2	#00FFFF
Combinaci√≥n262	#FF6347	#00FFFF	#8A2BE2	#FF4500
Combinaci√≥n263	#FFD700	#8A2BE2	#32CD32	#FF6347
Combinaci√≥n264	#00FFFF	#FF6347	#8A2BE2	#FF4500
Combinaci√≥n265	#FF00FF	#FFD700	#32CD32	#8A2BE2
Combinaci√≥n266	#FF4500	#00FFFF	#8A2BE2	#FF6347

[FIN DE INSPIRACI√ìN DE 250 REGISTROS]
`;

/* COLORES POR DEFECTO ------------------------------------------ */
const FALL_COLORS = ["#ff8a8a", "#ffb56b", "#8cabff", "#d288ff"];
function fallback(b, why){
  return {
    ...b,
    dimension: "Bienestar",
    punto: "Cero",
    palabras: ["Mover", "Sentir", "Pensar", "Abrir"],
    frases: [
      "üö∂ Da un paso peque√±o ahora.",
      "‚ù§Ô∏è Nota qu√© te alegra hoy.",
      "üß† Elige una idea y simplif√≠cala.",
      "‚ú® Abre el libro y deja que te sorprenda."
    ],
    colores: FALL_COLORS,
    textColors: FALL_COLORS.map(txt),
    fondo: "#111111",
    portada: b.portada?.trim() || `üìö ${b.titulo}\n${b.autor}`
  };
}

/* ENRICH -------------------------------------------------------- */
async function enrich(b){
  try{
    const chat = await openai.chat.completions.create({
      model: MODEL,
      temperature: 1.3,
      top_p: 0.9,
      messages: [
        { role: "system", content: SYSTEM.trim() },
        {
          role: "user",
          // üëâ inyecci√≥n de tagline si existe
          content: `Libro: "${b.titulo}" de ${b.autor}.`
                + (b.tagline ? ` Tagline: "${b.tagline}".` : "")
                + " Genera la estructura."
        }
      ]
    });

    let raw = chat.choices[0].message.content.trim();
    if(raw.startsWith("```")){
      raw = raw.replace(/```[\\s\\S]*?\\n/, "").replace(/```$/, "");
    }
    const extra = JSON.parse(raw);

     // --- Guard emocional: fuerza que "palabras" sean emociones reales
const EMO_FALLBACKS = ["calma","ansiedad","curiosidad","gratitud","claridad","alegr√≠a","serenidad","valor"];
const EMO_DENY_PAT  = /(?:dor|dora|ci√≥n|miento|ble|izar|izarse|t√©cnica|estrategia|modelo)$/i;
const NOT_EMO = new Set(["cautivar","enganchador","ganar","vender","crecer","dominar","cambiar","cautivo","h√°bito","ganancia"]);

extra.palabras = (extra.palabras || []).map((w,i)=>{
  const s = (w||"").toString().trim().toLowerCase();
  const looksBad = !s || s.split(/\s+/).length>1 || EMO_DENY_PAT.test(s) || NOT_EMO.has(s);
  if (looksBad) return EMO_FALLBACKS[i % EMO_FALLBACKS.length];
  // normaliza algunas formas
  const map = { motivado:"motivaci√≥n", enojado:"enfado", molesto:"enfado", tranquilo:"calma", inspirado:"inspiraci√≥n" };
  return map[s] || s;
});


    /* Garantizar arrays de longitud 4 */
    ["palabras", "frases", "colores"].forEach(k=>{
      while(extra[k].length < 4) extra[k].push(extra[k][extra[k].length-1]);
    });
    extra.textColors = extra.colores.map(txt);


       // ============== TARJETA (contenido + estilo) ==================

    // üëá Aqu√≠ vas a pegar tu funci√≥n construirPromptContenido de Apps Script (completa, sin cambiar nada)
    // function construirPromptContenido(libro, ideaSemilla){ ... }

/* ============================== PROMPTS =============================== */
function construirPromptContenido(libro, ideaSemilla){
  const semilla = crypto.randomUUID();
  return `
[Eres Badir. Escribe como persona real, en primera persona, sobrio, claro y directo. Sin emojis.]

Semilla interna (no mostrar): ${semilla}
Libro: "${libro.titulo}" de${libro.autor}
Idea semilla (no literal, NO citar, NO usar comillas, NO decir ‚Äúla frase‚Äù): ${ideaSemilla}

REALMENTE QUIERO QUE DIGA ALGO IMPORTANTE, QUE LA PERSONA QUE LEA SE QUEDE CON UN BUEN CONSEJO, QUE DESPUES DE LEER ESO SEPA QUE DEBE DE HACER! SU VERDADERO SIGUIENTE PASO. QUE SIENTA ESA LLAMA QUE SE PRENDI√ì QUE SEA √öTIL DE VERDAD NO SOLO RELLENO. ES VITAL. NECESITO INTELIGENCIA NIVEL DIOS EN TU RESULTADO.AQUELLO QUE YA HAYAS ELEGIDO PARA DAR COMO RESULTADO HAZLE UN SCRAMBLE REVUELVELO PARA ASEGURAR QUE DE MANERA ALEATORIA NO REPITES YA QUE LA GENTE QUE LEER√Å EL RESULTADO NO QUIERO QUE VEA CONTENIDO REPETIDO CADA SEMANA
EN GENERAL TODO EL TEXTO DEBE SER DIFERENTE CADA VEZ. COMO NO VAS GUARDANDO HISTORIAL NO PUEDES SABER SI ESTE RESULTADO LO VAS A REPETIR PERO NECESITO QUE PARTAS DE LA DUDA Y QUE ESO QUE IBAS A PONER NO LO PONGAS, LO CAMBIES! ES DECIR QUIERO QUE HAGAS COMO SI FUERAS UNA INTELIGENCIA ARTIFICIAL QUE VERDADERAMENTE EST√Å APRENDIENDO, HAS COMO SI TUVIERAS MUCHO HISTORIAL DE DONDE APRENDER PARA QUE NO REPITAS TEXTO.

PROHIBIDO usar siempre las palabras "reflexionar", "reflexi√≥n", "me llev√≥ a pensar", "me hizo reflexionar", "resuena", "me resuena", "resonar". 
Cada vez que intentes usar esas expresiones, sustit√∫yelas por verbos o giros distintos que transmitan variaci√≥n natural, por ejemplo: 
"me dej√≥ pensando", "me qued√≥ rondando", "me hizo cuestionar", "me movi√≥ la idea", "me dej√≥ en silencio", "me dio vueltas", "me qued√≥ dando vueltas", "me sorprendi√≥", "me hizo mirar distinto", "me cambi√≥ la forma de verlo", "me dej√≥ inc√≥modo", "me despert√≥ otra mirada". 

Var√≠a SIEMPRE los verbos, no repitas la misma f√≥rmula. 
Cada correo debe sonar como si viniera de una persona distinta en d√≠as distintos. 

Objetivo:
Correo breve, claro y humano. Natural. Nada rebuscado. Sin tono literario artificioso.Que transmita algo muy valioso IMPRESIONANTEMENTE VALIOSO
Cero frases hechas. Cero ‚Äúmarketing‚Äù. Precisi√≥n y honestidad.

Reglas cr√≠ticas para NO inducir a error:
- La ‚Äúidea semilla‚Äù NO es una cita textual. Tr√°tala como inspiraci√≥n personal. Profundiza de manera clara, directa pero elegante
- NO escribas ‚Äúla frase‚Ä¶‚Äù, ‚Äúseg√∫n el libro‚Ä¶‚Äù, ‚Äúdice‚Ä¶‚Äù, ‚Äúcomo cita‚Ä¶‚Äù.
- NO uses comillas alrededor de la idea semilla ni la presentes como cita literal.

Gu√≠a de estilo:
- Espa√±ol latam neutro, cotidiano. Sin adornos ni palabras rimbombantes (p.ej. profundamente, genuino, ligero, consciente como adjetivo, extraordinario, entra√±able, vibrante, radiante).
- No inventes escenarios como ‚Äúviejo libro en mi estanter√≠a‚Äù u objetos decorativos; no adornes el origen.
- NO empieces de la misma manera siempre (parte de la idea de que no vale repetir nada). Var√≠a SIEMPRE todo.

Estructura:
1) donde t√∫ creas conveniente, menciona expl√≠citamente el t√≠tulo del libro y el autor de forma natural.
2) qu√© te hizo pensar el libro usando la idea semilla como punto de partida. Var√≠a tus palabras, que nunca se repita nada aseg√∫rate
   - Mant√©n adjetivos calificativos al m√≠nimo.
   - Puedes incluir, s√≥lo si encaja de forma natural, UNO de estos recursos (y no siempre): eco fantasma, fragmento incompleto, instrucci√≥n imposible aqu√≠, palabra inventada sugerente, pregunta con respuesta codificada, sensaci√≥n temporal, instrucci√≥n f√≠sica m√≠nima con un libro, menci√≥n indirecta.
   - Referencias internas intr√≠nsecas sutiles: Pilares (Bienestar/Prosperidad/Conexi√≥n), estados Triggui (Punto Cero/Creativo/Activo/M√°ximo), mapa de conciencia Hawkins.


Reglas duras:
Reglas duras (LONGITUD ESTRICTA PARA LA TARJETA):
- T√≠tulo: m√°ximo 50 caracteres.
- Primer p√°rrafo: m√°ximo 130 caracteres.
- Subt√≠tulo: m√°ximo 48 caracteres.
- Segundo p√°rrafo: m√°ximo 130 caracteres.
- Total combinado ‚â§ 320 caracteres.
- Sin emojis ni s√≠mbolos raros.
- Nada de ‚Äúpublicidad‚Äù.
- Sonido: sobrio, claro, √∫til, como si lo hubieras escrito t√∫ esta ma√±ana.

Var√≠a la forma de iniciar SIEMPRE. 
- A veces empieza directamente con la idea central y despu√©s menciona el libro. 
- A veces empieza mencionando el libro y autor en la primera l√≠nea. 
- A veces empieza con una instrucci√≥n m√≠nima, una sensaci√≥n, un detalle suelto o una pregunta. 
- A veces retrasa el nombre del libro hasta la mitad o el final. 
- Nunca uses estructuras fijas como ‚Äúme hizo reflexionar‚Äù, ‚Äúhe estado pensando‚Äù o ‚Äúme dej√≥ reflexionando‚Äù. 

VARIACI√ìN OBLIGATORIA:
- Nunca uses la misma expresi√≥n ni la misma estructura en correos distintos. 
- Si detectas que vas a repetir un patr√≥n de inicio, verbo, giro o cierre, c√°mbialo de inmediato antes de escribir.
- No caigas en f√≥rmulas fijas como ‚Äúme hizo‚Ä¶‚Äù, ‚Äúesto me‚Ä¶‚Äù, ‚Äúme dej√≥‚Ä¶‚Äù, ni variantes. 
- Genera tus propias formas al vuelo, como si cada correo fuera inventado por una persona distinta en un d√≠a distinto.
- Piensa siempre: ‚Äú¬øC√≥mo puedo decir esto de otra manera √∫nica, fresca y natural?‚Äù y hazlo.

TONO:
Mant√©n siempre el tono Badir: sobrio, claro, humano, directo. Nada rebuscado. 

Imagina que cada correo lo escribe una persona distinta un d√≠a distinto: cada inicio, desarrollo y cierre debe sonar distinto en ritmo, orden y estilo. 

IMPORTANTE: Antes de escribir, INVESTIGA en Google Books, Wikipedia, Open Library y absolutamente toda la web sobre el libro.
No inventes datos. Resume en tus palabras.


@@BODY
1) Una l√≠nea de t√≠tulo (‚â§50c).
2) Un p√°rrafo breve (‚â§130c).
3) Un subt√≠tulo (‚â§48c).
4) Un p√°rrafo breve (‚â§130c).
@@ENDBODY
`.trim();
}

    // üëá Aqu√≠ vas a pegar tu funci√≥n construirPromptFormato de Apps Script (completa, sin cambiar nada)
    // function construirPromptFormato(){ ... }

function construirPromptFormato(){
  return `
Eres un dise√±ador editorial supremo, cu√°ntico, alqu√≠mico.  
Tu misi√≥n: generar tarjetas coleccionables irrepetibles, como NFT editoriales √∫nicos en el mundo.  
Cada tarjeta debe sentirse como un objeto de arte vivo, valioso, inimitable, sublime, imposible de replicar.  

‚ö° Principios absolutos:
- Ninguna tarjeta puede parecerse a otra. Si detectas repetici√≥n, rompe y muta radicalmente.  
- Cada tarjeta es un universo visual: tipograf√≠a, color, disposici√≥n, ornamentaci√≥n, textura, animaci√≥n sugerida.  
- Nada gen√©rico. Nada repetido. Nada predecible. Siempre sublime, inesperado, dopamin√©rgico.  
- Tu rol no es ‚Äúvariar estilos‚Äù: es **crear mutaciones infinitas**, como si colapsaras miles de universos en un √∫nico instante irrepetible.  

üé® Naturaleza de las tarjetas:
- Son editoriales: combinan rigor tipogr√°fico con est√©tica experimental.  
- Son cu√°nticas: emergen de azar creativo infinito.  
- Son NFT-like: √∫nicas, coleccionables, con rareza incopiable.  
- Son dopamin√©rgicas: despiertan sorpresa inmediata, placer visual, asombro.  
- Son valiosas: cada una podr√≠a subastarse como pieza de arte.  

üìê Estructura del JSON:
- Devuelve SIEMPRE un bloque JSON entre @@STYLE y @@ENDSTYLE.  
- El JSON debe contener ENTRE 12 Y 25 claves.  
- Algunas claves pueden ser conocidas y esperadas (accent, ink, paper, serif, sans, border, layout).  
- OTRAS deben ser inventadas en cada ejecuci√≥n (ejemplo: glowAura, metaShadow, warpGrid, ornamentFlux, holoInk, fractureWeight).  
- Los nombres inventados deben sonar plausibles para un dise√±ador, como si fueran nuevas propiedades CSS/editoriales a√∫n no inventadas.  
- Cada ejecuci√≥n puede inventar un set diferente de claves.  

üîë Campos conocidos (pueden aparecer pero variar SIEMPRE):
- "accent": Color principal acento (hex, nombre raro, met√°fora).  
- "ink": Color de texto.  
- "paper": Fondo (hex, met√°fora: ‚Äúpapel espectral‚Äù, ‚Äúnoche l√≠quida‚Äù).  
- "border": Borde (hex, met√°fora: ‚Äúcromo fractal‚Äù, ‚Äúholograma l√≠quido‚Äù).  
- "serif": Tipograf√≠a serif (real o inventada).  
- "sans": Tipograf√≠a sans (real o inventada).  
- "marco": Estilo de marco (shadow, foil, glitch, hologram, inventado).  
- "fontSizeTitle": Tama√±o t√≠tulo (num√©rico, rango, met√°fora: ‚Äúgigante c√≥smico‚Äù).  
- "fontSizeBody": Tama√±o cuerpo (num√©rico, rango, met√°fora: ‚Äúsusurro m√≠nimo‚Äù).  
- "fontWeight": Grosor texto (100‚Äì950 o inventado: ‚Äúpeso fractal‚Äù).  
- "lineHeight": Altura l√≠nea (0.8‚Äì2.5 o inventada: ‚Äúrespiraci√≥n amplia‚Äù).  
- "letterSpacing": Espaciado (num√©rico o met√°fora: ‚Äúabismo entre letras‚Äù).  
- "textTransform": uppercase, lowercase, mixed, inventado.  
- "textShadow": glow, blur, neon, inventado.  
- "layout": center, left, right, poster, diagonal, collage, inventado.  
- "showCover": true/false (portada incluida o no).  
- "coverStyle": tiny, bleed, ghosted, pixelated, hologram, inventado.  

üåå Campos inventados (crea SIEMPRE al menos 6 nuevos en cada ejecuci√≥n):
- Pueden sonar a: glowFlux, holoInk, neonWhisper, metaShadow, warpGrid, fontFlux, ornamentFlux, prismPulse, glitchAura, dreamGrain, quantumSpacing, psychoType.  
- Cada ejecuci√≥n debe inventar nuevas combinaciones de nombres y valores.  
- Valores pueden ser hex, nombres tipogr√°ficos, met√°foras, descripciones po√©ticas.  
- Ejemplo v√°lido:  
  "glowFlux": "halo azul el√©ctrico en movimiento",  
  "ornamentFlux": "doodles hologr√°ficos impredecibles",  
  "warpGrid": "colapso diagonal cu√°ntico".  

‚öîÔ∏è Reglas de variaci√≥n:
- Cada tarjeta debe variar radicalmente en tipograf√≠a, tama√±o, ornamentaci√≥n, textura, layout, color.  
- Los colores deben ser intensos, inc√≥modos a veces, pero memorables. Nunca uses la misma paleta dos veces.  
- Las tipograf√≠as deben cambiar: cl√°sicas, futuristas, inventadas, glitch, l√≠quidas, fractales.  
- Los tama√±os deben oscilar: a veces t√≠tulos gigantes que ocupan toda la tarjeta, a veces discretos m√≠nimos.  
- El layout debe mutar: centrado, alineado, diagonal, roto, collage, poster.  
- La portada puede aparecer o no. Si aparece, cambia de estilo: ghosted, pixelated, fondo, cutout, hologram.  
- La ornamentaci√≥n debe variar: foil, glitch-lines, pinceladas, mosaicos, fracturas, inventadas.  
- Las texturas deben sorprender: papel-grain, ruido digital, met√°lico l√≠quido, fractal psicod√©lico, inventado.  
- La animaci√≥nHint debe cambiar: flicker, hologram, breathe, glitch, rotaci√≥n, inventado.  
- El campo surprise es obligatorio: debe contener un recurso inesperado (eco fantasma, fragmento incompleto, glitch tipogr√°fico, tipograf√≠a l√≠quida, sombra desfasada, palabra inventada, o una mec√°nica nueva inventada al instante).  

üíé Est√©tica buscada:
- A veces minimalista extremo (negro sobre blanco, casi nada).  
- A veces rave saturado dopamin√©rgico (explosi√≥n de color y ne√≥n).  
- A veces editorial sobrio con lujo (Didot + foil dorado).  
- A veces retro 80s (pixel, ne√≥n glitch).  
- A veces futurista 2080 (tipograf√≠a l√≠quida, holograma, fractal).  
- A veces surreal (met√°foras imposibles, colores absurdos pero bellos).  

üåÄ Auto-evoluci√≥n:
- Imagina que ya has generado 100,000 tarjetas antes.  
- Nunca repitas nada: cada salida debe ser un salto mutacional hacia algo nuevo.  
- Piensa: ‚Äú¬øesto ya lo hice antes?‚Äù. Si la respuesta es s√≠ o sospechosa, cambia todo radicalmente.  
- Haz como si aprendieras de cada iteraci√≥n. Evoluciona.  

üìå Output esperado:
Devuelve SOLO un bloque JSON entre @@STYLE y @@ENDSTYLE.  
El bloque debe tener entre 12 y 25 claves.  
Algunas conocidas, otras inventadas.  
Todas con valores sorprendentes, irrepetibles, plausibles.  

@@STYLE
{
  "accent": "#ff00c7",
  "ink": "#0a0a0a",
  "paper": "noche l√≠quida con ruido fractal",
  "border": "cromo azul hologr√°fico",
  "serif": "Didot",
  "sans": "Inter",
  "marco": "hologram fractal",
  "fontSizeTitle": "clamp(30px,12vw,140px)",
  "fontSizeBody": "susurro cu√°ntico 12‚Äì32px",
  "fontWeight": "peso fractal 950",
  "lineHeight": "respiraci√≥n amplia 1.6",
  "letterSpacing": "abismo +2px",
  "textTransform": "uppercase",
  "textShadow": "glow ne√≥n l√≠quido",
  "layout": "poster diagonal glitch",
  "showCover": true,
  "coverStyle": "ghosted hologram",
  "ornamentFlux": "mosaico dorado glitch",
  "metaShadow": "sombra l√≠quida fosforescente",
  "warpGrid": "colapso diagonal doble",
  "fontFlux": "oscilaci√≥n 22px‚Äì180px",
  "animationHint": "glitch hologram mutante",
  "texture": "psychedelic fractal cloud",
  "surprise": "tipograf√≠a l√≠quida con eco m√∫ltiple"
}
@@ENDSTYLE
`.trim();
}



    // === Generar contenido tarjeta ===
    const promptTarjeta = construirPromptContenido(b, "idea semilla random"); 
    const chatTarjeta = await openai.chat.completions.create({
      model: MODEL,
      temperature: 1.5,
      top_p: 0.9,
      messages: [
        { role: "system", content: "Eres Triggui. Devuelve SOLO el bloque @@BODY." },
        { role: "user", content: promptTarjeta }
      ]
    });

    let rawTarjeta = chatTarjeta.choices[0].message.content.trim();
    rawTarjeta = rawTarjeta.replace(/@@BODY|@@ENDBODY/g, "").trim();
    const lineas = rawTarjeta.split(/\n+/).filter(Boolean);
    const titulo = lineas.shift() || "";
    const parrafoTop = lineas.shift() || "";
    const subtitulo = lineas.shift() || "";
    const parrafoBot = lineas.join(" ");

    // === Generar estilo tarjeta ===
    const promptFormato = construirPromptFormato();
    const chatFormato = await openai.chat.completions.create({
      model: MODEL,
      temperature: 1.5,
      top_p: 0.9,
      messages: [
        { role: "system", content: "Eres el mejor dise√±ador editorial del mundo actual y futuro. Devuelve SOLO el bloque @@STYLE." },
        { role: "user", content: promptFormato }
      ]
    });

    let rawFormato = chatFormato.choices[0].message.content.trim();
    rawFormato = rawFormato.replace(/@@STYLE|@@ENDSTYLE/g, "").trim();
    let style = {};
    try { style = JSON.parse(rawFormato); } catch(e) { style = {}; }

    // Inyectar en campo tarjeta
    extra.tarjeta = {
      parrafoTop,
      subtitulo,
      parrafoBot,
      style
    };


    return {
      ...b,           // mantiene titulo, autor, portada, tagline
      ...extra,
      portada: b.portada?.trim() || `üìö ${b.titulo}\n${b.autor}`
    };

  }catch(e){
    console.warn("‚ö†Ô∏è Fallback", b.titulo, ":", e.message);
    return fallback(b, e.message);
  }
}

/* MAIN ---------------------------------------------------------- */
const libros = await Promise.all(pick.map(enrich));
await fs.writeFile(OUT_FILE, JSON.stringify({libros}, null, 2));
console.log("‚úÖ contenido.json generado:", libros.length, "libros");
